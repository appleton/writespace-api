<keybinding keys="?" on-press="showKeyboardHints()"></keybinding>
<keybinding keys="n" on-press="addNote()"></keybinding>
<keybinding keys="j" on-press="changeNote(true)"></keybinding>
<keybinding keys="k" on-press="changeNote(false)"></keybinding>
<keybinding keys="/" on-press="focusSearch()"></keybinding>

<header class="app-header u-text-right">
  <span class="u-text-s u-margin-Rm">{{user.name}}</span>

  <div class="app-header__settings">
    <button dropdown-toggle class="fa fa-cog action">
      <span class="action__text">Settings</span>
    </button>

    <ul class="app-header__settings__dropdown">
      <li>
        <a class="app-header__settings__dropdown__item" ui-sref="auth.notes.import.dropbox">
          <i class="app-header__settings__dropdown__icon fa fa-dropbox"></i>
          Import from Dropbox
        </a>
      </li>

      <li>
        <button class="app-header__settings__dropdown__item" ng-click="logout()">
          <i class="app-header__settings__dropdown__icon fa fa-sign-out"></i>
          Log out
        </button>
      </li>
    </ul>
  </div>
</header>


<section class="sidebar">
  <header class="sidebar__header">
    <button class="action u-c-light-grey" ng-click="addNote()">
      <i class="fa fa-plus"></i>
    </button>
    <div class="sidebar__header__search">
      <input class="input input--search" type="search"
             placeholder="search" ng-model="search.text" set-focus="focusSearch" />
    </div>
  </header>

  <div class="sidebar__body">
    <div class="sidebar__body__list">
      <ul ng-show="notes.length" class="sidebar__body__list">
        <li ng-repeat="note in notes | filter:search | orderBy:'updatedAt':true"
            ng-model="virtualScrollState"
            class="sidebar__body__list__item"
            ng-class="{ 'is-active': isState(note._id) }">
          <a ui-sref="auth.notes.show({id: note._id})"
             class="sidebar__body__list__item__link">
            <span class="u-text-truncate u-inline-block">
              {{ (note.text | line:1) || "untitled" }}
            </span>
            <span class="sidebar__body__list__item__link__meta">
              {{ note.updatedAt | timeAgo }}
            </span>
            <span class="sidebar__body__list__item__link__body u-text-truncate u-inline-block">
              {{ note.text | line:2 }}
            </span>
          </a>
        </li>
      </ul>
    </div>

    <div ng-hide="notes.length" class="sidebar__body__empty">
      <p class="u-text-center">
        Welcome to Notesy<br />
        Add your first note here!
      </p>
    </div>
  </div>
</section>

<ui-view autoscroll="false"></ui-view>
