<keybinding keys="?" on-press="showKeyboardHints()"></keybinding>
<keybinding keys="n" on-press="addNote()"></keybinding>
<keybinding keys="j" on-press="changeNote(true)"></keybinding>
<keybinding keys="k" on-press="changeNote(false)"></keybinding>
<keybinding keys="/" on-press="focusSearch()"></keybinding>

<header class="app-header u-text-right">

</header>


<section class="sidebar">
  <header class="sidebar__header">
    <div class="sidebar__header__nav sidebar__header__nav">
      <button dropdown-toggle class="icon icon--nav action"  title="Navigation">
        <span class="action__text">Navigation</span>
      </button>

      <ul class="sidebar__header__nav__dropdown">
        <li>
          <span class="sidebar__header__nav__dropdown__header u-text-s u-margin-Rm">
            {{user.name}}
          </span>
        </li>

        <li>
          <a class="sidebar__header__nav__dropdown__item" ui-sref="auth.notes.import.dropbox">
            <i class="sidebar__header__nav__dropdown__icon icon icon--dropbox u-margin-Rxs"></i>
            Import from Dropbox
          </a>
        </li>

        <li>
          <button class="sidebar__header__nav__dropdown__item" ng-click="logout()">
            <i class="sidebar__header__nav__dropdown__icon icon icon--logout u-margin-Rxs"></i>
            Log out
          </button>
        </li>
      </ul>
    </div>

    <div class="sidebar__header__search">
      <input class="input input--search" type="search" name="search" id="search"
             ng-model="search.text" set-focus="focusSearch" />
      <label ng-hide="search.text.length" class="sidebar__header__search__label" for="search">
        <i class="icon icon--search u-margin-Rxxs"></i>
        search
      </label>
    </div>

    <button class="sidebar__header__add action u-c-light-grey" ng-click="addNote()"  title="New note">
      <i class="icon icon--plus"></i>
      <span class="action__text">New note</span>
    </button>
  </header>

  <div class="sidebar__body">
    <div class="sidebar__body__list">
      <ul ng-show="notes.length" class="sidebar__body__list">
        <li ng-repeat="note in notes | filter:search | orderBy:'updatedAt':true track by note._id"
            ng-model="virtualScrollState"
            class="sidebar__body__list__item"
            ng-class="{ 'is-active': isState(note._id) }">
          <a ui-sref="auth.notes.show({id: note._id})"
             class="sidebar__body__list__item__link">
            <span class="sidebar__body__list__item__link__title u-text-truncate u-inline-block">
              {{ (note.text | line:1) || "untitled" }}
            </span>
            <span class="sidebar__body__list__item__link__meta">
              {{ note.updatedAt | timeAgo }}
            </span>
            <span class="sidebar__body__list__item__link__body u-text-truncate u-inline-block">
              {{ note.text | line:2 }}
            </span>
          </a>
        </li>
      </ul>
    </div>

    <div ng-hide="notes.length" class="sidebar__body__empty">
      <p class="u-text-center">
        Welcome to Notesy<br />
        Add your first note here!
      </p>
    </div>
  </div>
</section>

<ui-view autoscroll="false"></ui-view>
